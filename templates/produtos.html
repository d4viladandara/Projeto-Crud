{% extends "base.html" %}

{% block title %}Produtos{% endblock %}

{% block content %}
<h1>Produtos</h1>

<h2>Adicionar Produto</h2>
<form action="/produtos/create" method="POST" class="form-inline">
    <input type="text" name="name" placeholder="Nome do Produto" required>
    <input type="number" step="0.01" name="price" placeholder="Preço" required>
    <input type="text" name="description" placeholder="Descrição">
    
    <select name="category_id" required>
        <option value="">Selecione a Categoria</option>
        {% for categoria in categorias %}
            <option value="{{ categoria.id }}">{{ categoria.description }}</option>
        {% endfor %}
    </select>

    <button type="submit" class="atualizar">Adicionar</button>
</form>

    <h2>Lista de Produtos</h2>
    <ul>
        {% for produto in produtos %}
            <li>
                <form action="/produtos/update/{{ produto.id }}" method="POST" class="form-inline">
                    <input type="text" name="name" value="{{ produto.name }}" required>
                    <input type="number" step="0.01" name="price" value="{{ produto.price }}" required>
                    <input type="text" name="description" value="{{ produto.description }}">
                    <select name="category_id" required>
                        {% for categoria in categorias %}
                            <option value="{{ categoria.id }}" {% if produto.category_id == categoria.id %}selected{% endif %}>
                                {{ categoria.description }}
                            </option>
                        {% endfor %}
                    </select>
                    <button type="submit" class="atualizar">Atualizar</button>
                </form>

                <form action="/produtos/delete/{{ produto.id }}" method="POST" class="form-inline">
                    <button type="submit" class="excluir">Excluir</button>
                </form>
            </li>
        {% endfor %}
    </ul>
{% endblock %}
